//@ui5-bundle historicvin/Component-preload.js
sap.ui.predefine("historicvin/Component", ["sap/fe/core/AppComponent"],function(e){"use strict";return e.extend("historicvin.Component",{metadata:{manifest:"json"}})});
sap.ui.predefine("historicvin/ext/controller/UploadMF", ["sap/m/MessageToast"],function(e){"use strict";function o(o){var t;function n(e){t&&t.getBeginButton().setEnabled(e)}function r(e){t.setBusy(e)}function s(){t&&t.close()}function a(e){MessageBox.error(e||"Upload failed")}function i(e){return sap.ui.core.Fragment.byId("uploadDialog",e)}return{onBeforeOpen:function(e){t=e.getSource();o.addDependent(t)},onAfterClose:function(e){o.removeDependent(t);t.destroy();t=undefined},onFileChange:function(o){const t=o.getParameter("files")?.[0];if(!t)return;const n=new FileReader;n.onload=o=>{this._csvText=o.target.result;e.show("CSV loaded. Click Process.")};n.onerror=()=>e.show("Failed to read file.");n.readAsText(t)},onOk:function(o){if(!this._csvText){return e.show("Please select a CSV file first.")}fetch("/odata/v4/vinlog/uploadMiGTemp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:this._csvText})}).then(async e=>{if(!e.ok)throw new Error(await e.text());return e.json()}).then(o=>{const t=o?.value??o;if(t){e.show(t)}else{e.show("Processing complete.")}s()}).catch(o=>{let t="Unknown error";try{const e=JSON.parse(o.message.replace(/^Error:\s*/,""));t=e?.error?.message||t}catch(e){t=o.message}console.log(t);e.show(t);s()})},onCancel:function(e){s()},onTypeMismatch:function(e){var o=e.getSource().getFileType().map(function(e){return"*."+e}).join(", ");a("The file type *."+e.getParameter("fileType")+" is not supported. Choose one of the following types: "+o)},onFileAllowed:function(e){n(true)},onFileEmpty:function(e){n(false)},onUploadComplete:function(t){var i=t.getParameter("status");var l=t.getSource();l.clear();n(false);r(false);if(i>=400){var c=JSON.parse(t.getParameter("responseRaw"));a(c&&c.error&&c.error.message)}else{e.show("Uploaded successfully");o.refresh();s()}}}}return{UploadMigM:function(t,n){var r=o(this);this.loadFragment({id:"uploadDialog",name:"historicvin.ext.fragment.UploadDialog",controller:r}).then(function(e){e.open()});e.show("Custom handler invoked.")}}});
sap.ui.require.preload({
	"historicvin/ext/fragment/UploadDialog.fragment.xml":'<core:FragmentDefinition xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified"\n                         xmlns="sap.m"><Dialog id="uploadDialog" title="Import Vin Data" class="sapUiResponsiveContentPadding" beforeOpen=".onBeforeOpen"\n            afterClose=".onAfterClose"><content><u:FileUploader\n                    id="uploader"\n                    name="csv"\n                    multiple="false"\n                    fileAllowed=".onFileAllowed"\n                    fileEmpty=".onFileEmpty"\n                    uploadComplete=".onUploadComplete"\n                    typeMissmatch=".onTypeMismatch"\n                    change=".onFileChange"\n                    sendXHR="true"\n                    useMultipart="false"\n                    placeholder="Choose a CSV file..."\n                    httpRequestMethod="Post"/></content><beginButton><Button id="ok" text="OK" press=".onOk" type="Emphasized" enabled="false"/></beginButton><endButton><Button id="cancel" text="Cancel" press=".onCancel"/></endButton></Dialog></core:FragmentDefinition>',
	"historicvin/i18n/i18n.properties":'# This is the resource bundle for historicvin\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Historic VIN Information\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n\n#XCOL: Custom action text\nmigrationUpload=Migration Upload\n',
	"historicvin/manifest.json":'{"_version":"1.76.0","sap.app":{"id":"historicvin","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:lrop","version":"1.20.0","toolsId":"2490bd1d-b32d-4b0d-bc47-79c63c195e3e"},"dataSources":{"mainService":{"uri":"/odata/v4/vinlog/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.143.2","libs":{"sap.m":{},"sap.ui.core":{},"sap.fe.templates":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"historicvin.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":[""]}}},"resources":{"css":[]},"routing":{"config":{},"routes":[{"pattern":":?query:","name":"historicvindata_HeaderSrvList","target":"historicvindata_HeaderSrvList"},{"pattern":"historicvindata_HeaderSrv({key}):?query:","name":"historicvindata_HeaderSrvObjectPage","target":"historicvindata_HeaderSrvObjectPage"},{"pattern":"historicvindata_HeaderSrv({key})/items({key2}):?query:","name":"HistoricVinData_ItemsSrvObjectPage","target":"HistoricVinData_ItemsSrvObjectPage"}],"targets":{"historicvindata_HeaderSrvList":{"type":"Component","id":"historicvindata_HeaderSrvList","name":"sap.fe.templates.ListReport","options":{"settings":{"contextPath":"/historicvindata_HeaderSrv","variantManagement":"Page","navigation":{"historicvindata_HeaderSrv":{"detail":{"route":"historicvindata_HeaderSrvObjectPage"}}},"controlConfiguration":{"@com.sap.vocabularies.UI.v1.LineItem":{"tableSettings":{"type":"ResponsiveTable"}}},"content":{"header":{"actions":{"MigrationUpload":{"press":"historicvin.ext.controller.UploadMF.UploadMigM","visible":true,"enabled":true,"text":"{i18n>migrationUpload}"}}}}}}},"historicvindata_HeaderSrvObjectPage":{"type":"Component","id":"historicvindata_HeaderSrvObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"editableHeaderContent":false,"contextPath":"/historicvindata_HeaderSrv","navigation":{"items":{"detail":{"route":"HistoricVinData_ItemsSrvObjectPage"}}}}}},"HistoricVinData_ItemsSrvObjectPage":{"type":"Component","id":"HistoricVinData_ItemsSrvObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"editableHeaderContent":false,"contextPath":"/historicvindata_HeaderSrv/items"}}}}},"flexBundle":false},"sap.fiori":{"registrationIds":[],"archeType":"transactional"},"sap.cloud":{"public":true,"service":"vinlog.service"}}'
});
//# sourceMappingURL=Component-preload.js.map
